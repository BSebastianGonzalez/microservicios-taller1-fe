<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/img/logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- El título se actualizará dinámicamente desde React -->
    <title>PDAU</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    <script>
      function computeTitle(path) {
    // Rutas administrativas
      if (path === "/admin_login") return "Iniciar sesión | PDAU";
      if (path.startsWith("/admin_main")) return "Inicio | PDAU";

      if (path === "/data") return "Mis datos | PDAU";
      if (path === "/data_update") return "Actualizar datos personales | PDAU";
      if (path === "/personal_documents") return "Documentos personales | PDAU";

      if (path === "/read_complaint") return "Denuncias anónimas | PDAU";
      if (path === "/archived_complaints") return "Denuncias anónimas archivadas | PDAU";
      if (path.startsWith("/complaint_checkout")) return "Revisar denuncia | PDAU";
      if (path.startsWith("/archived_complaint")) return "Revisar denuncia archivada | PDAU";

      if (path.startsWith("/stats")) return "Generar estadísticas | PDAU";
      if (path.startsWith("/reports/new")) return "Generar reportes | PDAU";
      if (path.startsWith("/reports")) return "Consultar reportes | PDAU";

      // Rutas públicas que ya tenías
      if (path === "/") return "Inicio | PDAU";
      if (path === "/law_frame") return "Consultar Marco Legal | PDAU";
      if (path.startsWith("/consulta") || path.startsWith("/consult")) return "Consultar Denuncia | PDAU";
      if (path.startsWith("/registrar") || path.startsWith("/register") || path === "/complaint") return "Registrar Denuncia | PDAU";
      if (path.startsWith("/legal")) return "Avisos Legales | PDAU";
      if (path.startsWith("/denuncia")) return "Nueva denuncia | PDAU";

      // Fallback
      return "PDAU";
    }

    function actualizarTitulo() {
      const path = window.location.pathname;
      document.title = computeTitle(path);
    }

    // Inicial
    actualizarTitulo();

    // Navegación con botones del navegador
    window.addEventListener("popstate", actualizarTitulo);
    window.addEventListener("hashchange", actualizarTitulo);

    // Intercepta pushState y replaceState para SPA
    (function (history) {
      const pushState = history.pushState;
      const replaceState = history.replaceState;

      history.pushState = function () {
        const ret = pushState.apply(history, arguments);
        actualizarTitulo();
        return ret;
      };

      history.replaceState = function () {
        const ret = replaceState.apply(history, arguments);
        actualizarTitulo();
        return ret;
      };
    })(window.history);
  </script>
  </body>
</html>
